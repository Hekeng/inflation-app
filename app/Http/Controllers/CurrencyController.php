<?php
// –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç,          –ß—Ç–æ –Ω–∞ –≤—Ö–æ–¥–µ (–∞—Ä–≥—É–º–µ–Ω—Ç—ã),           –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ (callback),					–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç (–≤—ã—Ö–æ–¥)
// collect($arr),       –û–±—ã—á–Ω—ã–π –º–∞—Å—Å–∏–≤,                     ‚Äî,												–û–±—ä–µ–∫—Ç-–∫–æ–ª–ª–µ–∫—Ü–∏—è
// pluck('key'),        –ò–º—è –∫–ª—é—á–∞ (—Å—Ç—Ä–æ–∫–∞),                 ‚Äî,												–ö–æ–ª–ª–µ–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π —ç—Ç–æ–≥–æ –∫–ª—é—á–∞
// filter(fn),          –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è,					–≠–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å true/false,		"–ö–æ–ª–ª–µ–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ —Å —Ç–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –≥–¥–µ –±—ã–ª–æ true"
// map(fn),             –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è,					–≠–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ,	–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
// keys(),              –ù–µ—Ç,								‚Äî,												"–ö–æ–ª–ª–µ–∫—Ü–∏—è, —Å–æ—Å—Ç–æ—è—â–∞—è —Ç–æ–ª—å–∫–æ –∏–∑ –∫–ª—é—á–µ–π"
// all(),               –ù–µ—Ç,								‚Äî,												–û–±—ã—á–Ω—ã–π –º–∞—Å—Å–∏–≤ (–≤—ã–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ—Ä–æ–±–∫–∏)

// –•–µ–ª–ø–µ—Ä	              –ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç	                    –ß—Ç–æ –æ—Ç–¥–∞–µ—Ç	            –ó–∞—á–µ–º –Ω—É–∂–µ–Ω
// view('–∏–º—è', [–¥–∞–Ω–Ω—ã–µ])  –°—Ç—Ä–æ–∫—É (–ø—É—Ç—å –∫ —Ñ–∞–π–ª—É) –∏ –º–∞—Å—Å–∏–≤.	–û–±—ä–µ–∫—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã.	    –°–∫–ª–µ–∏–≤–∞–µ—Ç PHP –∏ HTML.
// dd($var)	              –õ—é–±—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.	                –ù–∏—á–µ–≥–æ (—É–±–∏–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç) Dump and Die. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∞–π—Ç. –°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏.
// collect($array)	      –û–±—ã—á–Ω—ã–π –º–∞—Å—Å–∏–≤.	                –û–±—ä–µ–∫—Ç ¬´–ö–æ–ª–ª–µ–∫—Ü–∏—è¬ª.	    –î–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–µ—Ç–æ–¥–∞–º map, filter –∏ —Ç.–¥.
// str($string)	          –û–±—ã—á–Ω—É—é —Å—Ç—Ä–æ–∫—É.	                –û–±—ä–µ–∫—Ç —Å—Ç—Ä–æ–∫–∏.	        –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å ->upper(), ->limit() –∏ —Ç.–¥.


// –í JS —Å—Ç—Ä–æ–∫–∞ ‚Äî —ç—Ç–æ –ø–æ—á—Ç–∏ –æ–±—ä–µ–∫—Ç, —É –Ω–µ—ë –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã —Ç–∏–ø–∞ .length –∏–ª–∏ .toUpperCase(). –í PHP —Å—Ç—Ä–æ–∫–∞ ‚Äî —ç—Ç–æ –ø—Ä–∏–º–∏—Ç–∏–≤. –¢—ã –Ω–µ –º–æ–∂–µ—à—å –Ω–∞–ø–∏—Å–∞—Ç—å $str->length().

// –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –≤ Laravel: Laravel –¥–∞–µ—Ç –∫—Ä—É—Ç–æ–π –ø–æ–º–æ—â–Ω–∏–∫ Str. –≠—Ç–æ –æ–±—ä–µ–∫—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏.

// –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: strlen($str) (—á–∏—Å—Ç—ã–π PHP) –∏–ª–∏ Str::length($str) (Laravel).

// –ü–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞: Str::contains($str, 'USA') (–≤–µ—Ä–Ω–µ—Ç true/false).

// –ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤: explode(', ', $str).

// –¶–∏–∫–ª –ø–æ —Å—Ç—Ä–æ–∫–µ: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ foreach —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–±—Ä–∞—Ç—å –Ω–µ–ª—å–∑—è. –ß—Ç–æ–±—ã —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –µ—ë –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ –º–∞—Å—Å–∏–≤: str_split($str).

// –°–æ–≤–µ—Ç: –í Laravel —Å—Ç–∞—Ä–∞–π—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–µ–ª–ø–µ—Ä str($string)->upper()->trim(). –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "Fluent interface" (—Ç–µ–∫—É—á–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å), –∏ –æ–Ω –æ—á–µ–Ω—å


// –†–∞–∑ —Ç–µ–±–µ –∑–∞—à–µ–ª –æ–ø–µ—Ä–∞—Ç–æ—Ä ?? (Null Coalescing), –≤–æ—Ç –µ—â–µ –ø–∞—Ä–∞ "—Å–∞—Ö–∞—Ä–Ω—ã—Ö" —à—Ç—É–∫:

// –≠–ª–≤–∏—Å-–æ–ø–µ—Ä–∞—Ç–æ—Ä ?: $result = $a ?: 'default'; ‚Äî –µ—Å–ª–∏ $a –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ false (–Ω–æ–ª—å, –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞), –≤–æ–∑—å–º–∏ –¥–µ—Ñ–æ–ª—Ç.

// Null-safe –æ–ø–µ—Ä–∞—Ç–æ—Ä ?-> (–ö–∏–ª–ª–µ—Ä-—Ñ–∏—á–∞!) –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –∏—â–µ—à—å –≥–æ—Ä–æ–¥, –Ω–æ —Å—Ç—Ä–∞–Ω—ã –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å: $city = $country?->city?->name; –ï—Å–ª–∏ $country ‚Äî null, –∫–æ–¥ –Ω–µ —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π, –∞ –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω–µ—Ç null –≤–æ –≤—Å—é —Ü–µ–ø–æ—á–∫—É. –í –æ–±—ã—á–Ω–æ–º PHP —Ç–µ–±–µ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –ø–∏—Å–∞—Ç—å —Ç—Ä–∏ if.

// $list = ["Apple", "Banana"];

// $list[] = "Orange"; // –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü (–∫–∞–∫ .push() –≤ JS) üçé
// unset($list[0]);    // –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –ø–æ –∫–ª—é—á—É üóëÔ∏è
// $count = count($list); // –£–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ üìè

// isset($var) ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏ –Ω–µ —Ä–∞–≤–Ω–∞ –ª–∏ –æ–Ω–∞ null.

// empty($var) ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ "–ø—É—Å—Ç—ã–º" (–Ω–æ–ª—å, –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞, –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, false –∏–ª–∏ null ‚Äî –≤—Å—ë —ç—Ç–æ –¥–ª—è –Ω–µ—ë "–ø—É—Å—Ç–æ").

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class CurrencyController extends Controller
{
    public function index()
    {
        define("BASE_CURRENCY", "php artisan serve");


        $newCountries = [
            "Ukraine" => [
                "rate" => 1.2,
                "currency" => "UAH",
                "year" => 1995
            ],
            "USA" => [
                "rate" => 2.2,
                "currency" => "USD",
                "year" => 2000
            ],
            "Canada" => [
                "rate" => 2,
                "currency" => "USD",
                "year" => 2010
            ],
            "Germany" => [
                "rate" => 0.5,
                "currency" => "Euro",
                "year" => 2020
            ]
        ];




        $color = [];
        foreach ($newCountries as $country => $value) {
            if ($country !== "USA" && $value['rate'] > 1) {
                $color[] = 'red';
            } else {
                $color []= 'green';
            };
        }

        //dump($color);
            return view('welcome', ['result' => $color, 'countries' => $newCountries, 'name' => null]);
    }

    // public function showCountry($name)
    // {
    //     // –¢–µ–ø–µ—Ä—å $name —Ä–∞–≤–Ω–æ —Ç–æ–º—É, —á—Ç–æ —é–∑–µ—Ä –≤–≤–µ–ª –≤ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, "usa")
    //     return "–í—ã –∏—â–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Å—Ç—Ä–∞–Ω–µ: " . $name;
    // }

    public function debug ($slug){
        return view('welcome', ['name' => $slug]);
            // return "–ü–∞—Ä–∞–º–µ—Ç—Ä –∏–∑ URL: " . $slug;
    }
}
// $country = strtoupper(trim(" ukraine "));

// $collection = collect($newCountries) -> keys() -> map(fn($name) => str($name)->lower()) -> all();
// $result = collect($newCountries)
// ->keys() // 1. –ü–æ–ª—É—á–∞–µ–º ["Ukraine", "USA", "Canada", "Germany"]
// ->map(function($name) { // 2. –ë–µ—Ä–µ–º –∫–∞–∂–¥–æ–µ –∏–º—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –µ–≥–æ
//     return str($name)->lower();
// })
// ->all();
// // $collection = keys(collect($newCountries));
// dump($collection);



// $laravelResult = collect($newCountries)->pluck('rate')->map(fn($r) => $r * 100)->all();

// $step1 = collect($newCountries);

// $step_filter = $step1 -> filter(fn($item) => $item['rate']> 1);

// $step2 = $step_filter->keys();

// $step3 = $step2->all();

// BASE_CURRENCY = "USD";
// $inflationRate = 5.5;
// $indexName = "CPI";
// $countryName = "Canada"; // –ò—Å–ø–æ–ª—å–∑—É–µ–º camelCase: countryName –≤–º–µ—Å—Ç–æ country
// $currentRate = 1.2;

// $countries = ["Ukraine", "USA", "Canada"];

// $newCountries = ["Ukraine"=>1.2, "USA"=>2.2, "Canada"=>2, "Germany"=>0.5];



// dd() dump($step3);

// $result = collect($newCountries)
//         ->filter(fn($item) => isset($item['rate']))
//         ->keys() // –¢—É—Ç –º—ã –ø–æ–ª—É—á–∏–ª–∏ –º–∞—Å—Å–∏–≤ –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ç—Ä–∞–Ω ["Ukraine", "USA"...]
//         ->map(fn($name) => strtoupper($name)); // –¢—É—Ç –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –∫–∞–ø—Å



// $result = collect($newCountries)->filter(fn($item) => $item['rate'] > 1) -> keys();

// $result = collect($newCountries)
//         ->filter(fn($item) => ($item['rate'] ?? 0) > 1)
//         ->map(fn($item) => $item['rate'] * 100)
//         ->keys()
//         ->all();

            // $step_filter = $step1 -> filter (function($item) {
            // // $item ‚Äî —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–∞—Å—Å–∏–≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã
            // $currentRate = $item['rate'];

            // if ($currentRate > 1) {
            //     return true;  // –û—Å—Ç–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–∫–µ
            // } else {
            //     return false; // –í—ã–∫–∏–¥—ã–≤–∞–µ–º
            // }
            // });

            // function newFilter ($arr){

            //     foreach ($arr as $key => $value) {
            //         $arr2 = [];
            //             if ($value == "rate") {
            //                 $arr2 = $value;
            //             }
            //     }
            //         $sortedTrueArr = [];
            //     foreach ($arr2 as $key1 => $value1) {

            //         if ($value1 > 1) {
            //            $sortedTrueArr = $value1;  // –û—Å—Ç–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–∫–µ
            //         }
            //     }
            //     return $sortedTrueArr;
            // }
